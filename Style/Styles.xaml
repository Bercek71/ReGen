<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Colors -->
    <SolidColorBrush x:Key="PrimaryBrush" Color="#6366F1"/>
    <SolidColorBrush x:Key="PrimaryHoverBrush" Color="#4F46E5"/>
    <SolidColorBrush x:Key="DangerBrush" Color="#EF4444"/>
    <SolidColorBrush x:Key="DangerHoverBrush" Color="#DC2626"/>
    <SolidColorBrush x:Key="SuccessBrush" Color="#10B981"/>
    <SolidColorBrush x:Key="SuccessHoverBrush" Color="#059669"/>
    <SolidColorBrush x:Key="BackgroundBrush" Color="#FAFBFC"/>
    <SolidColorBrush x:Key="SurfaceBrush" Color="#FFFFFF"/>
    <SolidColorBrush x:Key="BorderBrush" Color="#E5E7EB"/>
    <SolidColorBrush x:Key="TextPrimaryBrush" Color="#111827"/>
    <SolidColorBrush x:Key="TextSecondaryBrush" Color="#6B7280"/>
    <SolidColorBrush x:Key="TextMutedBrush" Color="#9CA3AF"/>

    <!-- Drop Shadows -->
    <DropShadowEffect x:Key="CardShadow" Color="#00000020" BlurRadius="16" ShadowDepth="4" Opacity="0.08"/>
    <DropShadowEffect x:Key="ButtonShadow" Color="#00000030" BlurRadius="8" ShadowDepth="2" Opacity="0.1"/>
    <DropShadowEffect x:Key="WindowShadow" Color="#00000025" BlurRadius="24" ShadowDepth="8" Opacity="0.12"/>

    <!-- Modern Button Style -->
    <Style x:Key="PrimaryButton" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Height" Value="44"/>
        <Setter Property="MinWidth" Value="120"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Margin" Value="8"/>
        <Setter Property="Padding" Value="24,0"/>
        <Setter Property="Effect" Value="{StaticResource ButtonShadow}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border" 
                            Background="{TemplateBinding Background}" 
                            CornerRadius="12"
                            RenderTransformOrigin="0.5,0.5">
                        <Border.RenderTransform>
                            <ScaleTransform x:Name="scaleTransform" ScaleX="1" ScaleY="1"/>
                        </Border.RenderTransform>
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"/>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="scaleTransform"
                                                         Storyboard.TargetProperty="ScaleX"
                                                         To="1.02" Duration="0:0:0.1"/>
                                        <DoubleAnimation Storyboard.TargetName="scaleTransform"
                                                         Storyboard.TargetProperty="ScaleY"
                                                         To="1.02" Duration="0:0:0.1"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="scaleTransform"
                                                         Storyboard.TargetProperty="ScaleX"
                                                         To="0.98" Duration="0:0:0.05"/>
                                        <DoubleAnimation Storyboard.TargetName="scaleTransform"
                                                         Storyboard.TargetProperty="ScaleY"
                                                         To="0.98" Duration="0:0:0.05"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource PrimaryHoverBrush}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Danger Button Style -->
    <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
        <Setter Property="Background" Value="{StaticResource DangerBrush}"/>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource DangerHoverBrush}"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- Success Button Style -->
    <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
        <Setter Property="Background" Value="{StaticResource SuccessBrush}"/>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource SuccessHoverBrush}"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- Secondary Button Style -->
    <Style x:Key="SecondaryButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Height" Value="44"/>
        <Setter Property="MinWidth" Value="120"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
        <Setter Property="Margin" Value="8"/>
        <Setter Property="Padding" Value="24,0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}" 
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="12">
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource BackgroundBrush}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Close Button Style -->
    <Style x:Key="CloseButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
        <Setter Property="FontSize" Value="16"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="Width" Value="36"/>
        <Setter Property="Height" Value="36"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}" 
                            CornerRadius="8">
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource DangerBrush}"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

<Style x:Key="ModernTextBox" TargetType="TextBox">
    <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
    <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
    <Setter Property="FontSize" Value="14" />
    <Setter Property="Height" Value="44" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="Padding" Value="4,4"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <!-- disable default red border -->
    <Setter Property="Validation.ErrorTemplate" Value="{x:Null}" />
    
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TextBox">
                <Border x:Name="Border"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="12"
                        SnapsToDevicePixels="True">
                    <ScrollViewer x:Name="PART_ContentHost"
                                  Margin="{TemplateBinding Padding}"
                                  SnapsToDevicePixels="True"
                                  Focusable="False" />
                </Border>
                <ControlTemplate.Triggers>
                    <!-- Hover -->
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource PrimaryBrush}" />
                    </Trigger>

                    <!-- Focus -->
                    <Trigger Property="IsKeyboardFocused" Value="True">
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource PrimaryBrush}" />
                        <Setter TargetName="Border" Property="BorderThickness" Value="2" />
                    </Trigger>

                    <!-- Disabled -->
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}" />
                        <Setter TargetName="Border" Property="Opacity" Value="0.6" />
                    </Trigger>

                    <!-- ERROR STATE — placed last so it overrides all -->
                    <Trigger Property="Validation.HasError" Value="True">
                        <Setter TargetName="Border" Property="BorderBrush" Value="Red"/>
                        <Setter TargetName="Border" Property="BorderThickness" Value="2"/>
                        <Setter Property="ToolTip"
                                Value="{Binding RelativeSource={RelativeSource Self},
                                Path=(Validation.Errors)[0].ErrorContent}"/>
                    </Trigger>
                </ControlTemplate.Triggers>

            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
    
    <!-- ModernDatePicker Style - přidej do Styles.xaml -->
<!-- Inspirováno vaším existujícím color scheme a ModernTextBox stylem -->

<!-- Styl pro DatePicker TextBox -->
<Style x:Key="DatePickerTextBoxStyle" TargetType="DatePickerTextBox">
    <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="CaretBrush" Value="{StaticResource PrimaryBrush}"/>
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="Padding" Value="12,0"/>
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="FontSize" Value="14"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="DatePickerTextBox">
                <ScrollViewer x:Name="PART_ContentHost"
                              HorizontalAlignment="Left"
                              VerticalAlignment="Center"
                              Margin="{TemplateBinding Padding}"
                              Focusable="False"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<!-- Styl pro DatePicker Button -->
<Style x:Key="DatePickerCalendarButtonStyle" TargetType="Button">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border x:Name="ButtonBorder"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        BorderThickness="0"
                        CornerRadius="0,12,12,0"
                        Width="44"
                        Height="42">
                    <Path x:Name="CalendarIcon"
                          Width="18" Height="18"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          Stretch="Uniform"
                          Fill="{StaticResource TextSecondaryBrush}"
                          Data="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,4.11 20.1,3 19,3H18V1M17,12H12V17H17V12Z"/>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="ButtonBorder" Property="Background" Value="{StaticResource BackgroundBrush}"/>
                        <Setter TargetName="CalendarIcon" Property="Fill" Value="{StaticResource PrimaryBrush}"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="ButtonBorder" Property="Background" Value="{StaticResource BorderBrush}"/>
                        <Setter TargetName="CalendarIcon" Property="Fill" Value="{StaticResource PrimaryHoverBrush}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<!-- Hlavní ModernDatePicker Style -->
<Style x:Key="ModernDatePicker" TargetType="DatePicker">
    <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
    <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
    <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="FontSize" Value="14"/>
    <Setter Property="Height" Value="44"/>
    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="IsTodayHighlighted" Value="True"/>
    <Setter Property="SelectedDateFormat" Value="Short"/>
    <Setter Property="SnapsToDevicePixels" Value="True"/>
    <!-- Disable default validation error template -->
    <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="DatePicker">
                <Grid>
                    <Border x:Name="MainBorder"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="12"
                            SnapsToDevicePixels="True">
                        
                        <Grid Margin="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <DatePickerTextBox x:Name="PART_TextBox"
                                               Grid.Column="0"
                                               Style="{StaticResource DatePickerTextBoxStyle}"
                                               Focusable="{TemplateBinding Focusable}"
                                               HorizontalContentAlignment="Left"
                                               VerticalContentAlignment="Center"/>
                            
                            <Button x:Name="PART_Button"
                                    Grid.Column="1"
                                    Style="{StaticResource DatePickerCalendarButtonStyle}"
                                    Focusable="False"/>
                        </Grid>
                    </Border>
                    
                    <Popup x:Name="PART_Popup"
                           AllowsTransparency="True"
                           Placement="Bottom"
                           PlacementTarget="{Binding ElementName=MainBorder}"
                           StaysOpen="False"/>
                </Grid>
                
                <ControlTemplate.Triggers>
                    <!-- Hover - stejně jako u ModernTextBox -->
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="MainBorder" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                    </Trigger>
                    
                    <!-- Focus - stejně jako u ModernTextBox -->
                    <Trigger Property="IsKeyboardFocused" Value="True">
                        <Setter TargetName="MainBorder" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                        <Setter TargetName="MainBorder" Property="BorderThickness" Value="2"/>
                    </Trigger>
                    
                    <!-- Focus na TextBox -->
                    <Trigger SourceName="PART_TextBox" Property="IsKeyboardFocused" Value="True">
                        <Setter TargetName="MainBorder" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                        <Setter TargetName="MainBorder" Property="BorderThickness" Value="2"/>
                    </Trigger>
                    
                    <!-- Disabled - stejně jako u ModernTextBox -->
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
                        <Setter TargetName="MainBorder" Property="Opacity" Value="0.6"/>
                    </Trigger>
                    
                    <!-- ERROR STATE - stejně jako u ModernTextBox, umístěno na konci -->
                    <Trigger Property="Validation.HasError" Value="True">
                        <Setter TargetName="MainBorder" Property="BorderBrush" Value="Red"/>
                        <Setter TargetName="MainBorder" Property="BorderThickness" Value="2"/>
                        <Setter Property="ToolTip"
                                Value="{Binding RelativeSource={RelativeSource Self},
                                Path=(Validation.Errors)[0].ErrorContent}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>



    <!-- Label Style -->
    <Style x:Key="FormLabel" TargetType="TextBlock">
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
        <Setter Property="Margin" Value="0,0,0,8"/>
    </Style>

    <!-- Title Style -->
    <Style x:Key="Title" TargetType="TextBlock">
        <Setter Property="FontSize" Value="28"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="Margin" Value="0,0,0,32"/>
    </Style>

    <!-- Subtitle Style -->
    <Style x:Key="Subtitle" TargetType="TextBlock">
        <Setter Property="FontSize" Value="16"/>
        <Setter Property="FontWeight" Value="Normal"/>
        <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="Margin" Value="0,0,0,24"/>
    </Style>

    <!-- Footer Style -->
    <Style x:Key="Footer" TargetType="TextBlock">
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="Margin" Value="0,24,0,0"/>
    </Style>

    <!-- Card Style -->
    <Style x:Key="Card" TargetType="Border">
        <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
        <Setter Property="CornerRadius" Value="16"/>
        <Setter Property="Effect" Value="{StaticResource CardShadow}"/>
        <Setter Property="Padding" Value="32"/>
        <Setter Property="Margin" Value="16"/>
    </Style>

    <!-- Input Group Style -->
    <Style x:Key="InputGroup" TargetType="StackPanel">
        <Setter Property="Orientation" Value="Vertical"/>
        <Setter Property="Margin" Value="0,0,0,24"/>
    </Style>

</ResourceDictionary>